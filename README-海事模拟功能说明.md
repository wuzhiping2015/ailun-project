# 海事航行模拟系统使用指南

## 功能概述

本系统基于开源地图库Leaflet和OpenStreetMap实现了海事船舶航行的模拟功能，无需API密钥即可使用。系统主要包含以下功能：

1. **地图显示与控制**
   - 地图类型切换（标准地图/卫星地图）
   - 天气信息显示/隐藏
   - 地图缩放控制

2. **船舶航行模拟**
   - 多类型船舶（集装箱船、油轮、散货船、滚装船、渔船）显示与模拟
   - 船舶实时航行轨迹记录
   - 多种航速模拟（0.5x-5x）
   - 船舶状态实时更新（燃油、载货量、航行进度等）
   - 船舶类型图例，便于区分不同类型船舶

3. **港口与航线管理**
   - 多个港口信息显示
   - 船舶计划航线显示
   - 实际航行轨迹记录与显示

4. **船舶详细信息**
   - 船舶识别信息（MMSI、IMO、呼号等）
   - 船舶规格信息（长度、宽度、吃水等）
   - 航行状态信息（SOG、COG、航向等）
   - 载货及燃油信息

## 使用方法

### 地图控制

- **地图类型切换**：点击"地图类型"按钮在标准地图和卫星地图之间切换
- **天气显示**：点击"天气显示"按钮切换天气信息的显示状态
- **地图缩放**：通过滑块控制地图缩放级别

### 船舶控制

- **船舶显示**：点击"船舶显示"按钮切换船舶的显示状态
- **航迹显示**：点击"航迹显示"按钮切换船舶实际航行轨迹的显示状态
- **计划航线**：点击"计划航线"按钮切换船舶预定航线的显示状态
- **船舶类型识别**：通过图例了解不同图标代表的船舶类型

### 模拟控制

- **开始模拟**：点击"开始模拟航行"按钮启动船舶航行模拟
- **停止模拟**：点击"停止模拟"按钮暂停航行模拟
- **模拟速度**：选择不同的速度倍率（0.5x、1x、2x、5x）控制模拟速度

### 船舶信息查看

- 点击地图上的船舶图标，可以查看船舶的详细信息，包括：
  - 基本信息（M/N、IMO、MMSI、CallSign、船舶类型、状态等）
  - 航行信息（经度、纬度、SOG、COG、航向、速度、目的地、预计到达时间）
  - 船舶规格（长度、宽度、吃水、载重量、船首吃水、船尾吃水）
  - 运行状态（燃油剩余、载货量、航程进度）

## 船舶类型说明

系统支持多种船舶类型，每种类型使用不同的图标和颜色标识：

1. **集装箱船**（蓝色三角形 ▲）：用于运输标准集装箱的大型船舶
2. **油轮**（红色菱形 ◆）：专门运输原油或成品油的船舶
3. **散货船**（黄色方形 ■）：用于运输煤炭、矿石等散装货物的船舶
4. **滚装船**（绿色圆形 ●）：可以通过滚动方式装卸车辆等货物的船舶
5. **渔船**（紫色倒三角 ▼）：用于捕捞作业的小型船舶

每种船舶类型具有不同的特性、尺寸和航行特点，在系统中通过图标大小也有所区分。

## 技术实现

### 地图技术

- **基础地图**：使用开源的Leaflet地图库，结合OpenStreetMap地图数据
- **卫星图层**：使用Esri提供的卫星影像图层
- **自定义图标**：通过自定义HTML/CSS创建船舶、港口等图标

### 航行模拟

- **路径计算**：使用线性插值算法计算船舶在两个航点之间的位置
- **航向计算**：根据当前位置和下一个航点计算船舶航向
- **状态更新**：实时更新船舶的各项状态数据（速度、燃油、载货等）
- **轨迹记录**：记录船舶实际航行路径，并在地图上绘制轨迹线

### 数据模型

船舶数据模型包含以下主要属性：
- 船舶识别信息（M/N、IMO、MMSI、CallSign等）
- 位置信息（经纬度坐标、SOG、COG、航向、速度）
- 规格信息（长度、宽度、吃水、载重量、船首/船尾吃水等）
- 状态信息（燃油剩余、载货量、航行状态）
- 航行信息（目的地、预计到达时间、航程进度）

## 开发设计思路

本系统的设计遵循以下原则：

1. **无需API密钥**：使用开源地图解决方案，避免API密钥的管理问题
2. **平滑动画**：通过高频更新和线性插值实现平滑的船舶移动效果
3. **可视化展示**：使用直观的图标和进度条展示船舶状态
4. **模块化设计**：将地图控制、船舶管理、模拟控制等功能模块化处理
5. **易于识别**：为不同类型船舶设计专属图标和颜色，增强可识别性
6. **详细信息展示**：根据行业标准呈现船舶详细参数

## 适用场景

- 海事教育培训
- 航运模拟演示
- 港口规划与管理
- 航线优化研究
- 海事安全演练
- 船舶交通管理系统演示

## 未来扩展方向

1. 进一步完善船舶参数和详细信息
2. 实现船舶之间的交互与避碰算法
3. 接入真实气象数据，模拟天气对航行的影响
4. 增加燃油消耗模型，根据速度和载重计算实际燃油消耗
5. 实现多用户协同操作，允许多人同时控制不同船舶
6. 添加船舶历史航迹回放功能
7. 支持用户自定义添加新的船舶和航线 