好的，我来帮您将这两个文档进行整合和优化，使其更加完整和实用。

# Cursor Rules 开发规范（完整版）

## 一、基础规则

### 1. 对话流程规范
```markdown
1. 交互规则
   - 遵循"提问-分析-执行-反馈"闭环
   - 使用emoji增强亲和力（🤔思考中、✅完成、⚠️注意等）
   - 保持专业友好语气
   - 全程使用中文沟通

2. 工具使用规范
   - 文件操作
     - 创建：create_file
     - 修改：edit_file
     - 删除：delete_file
     - 查看：read_file
   - 代码搜索
     - 语义搜索：codebase_search
     - 精确搜索：grep_search
     - 目录查看：list_dir
   - 终端操作
     - 命令执行：run_terminal_cmd
     - 后台任务：设置is_background
     - 需要确认：设置require_user_approval
```

## 二、项目初始化

### 1. 目录结构规范
```markdown
项目根目录
├─ docs/                    # 文档目录
│  ├─ architecture/        # 架构文档
│  ├─ components/          # 组件文档
│  ├─ api/                 # API文档
│  └─ performance/         # 性能优化文档
├─ src/
│  ├─ components/          # 通用组件
│  ├─ views/              # 页面组件
│  ├─ three/              # Three.js相关
│  ├─ utils/              # 工具函数
│  └─ types/              # 类型定义
├─ tests/                  # 测试目录
├─ .vite/                  # Vite配置
├─ README.md              # 项目说明
└─ package.json           # 项目配置
```

### 2. 文档要求
```markdown
1. README.md内容
   - 功能说明
   - 技术栈说明
   - 使用指南
   - 维护说明

2. 代码注释规范
   - 使用JSDoc格式
   - 包含参数说明
   - 包含返回值说明
   - 包含异常处理说明
```

## 三、问题处理与需求变更规范

### 1. 代码问题处理流程
```markdown
1. 问题分析阶段
   - 完整阅读相关代码
   - 理解功能逻辑
   - 使用工具定位问题
     - codebase_search语义搜索
     - grep_search精确搜索
     - read_file查看代码

2. 问题诊断阶段
   - 收集错误信息
     - 控制台错误
     - 网络请求状态
     - 性能指标
   - 复现问题
     - 记录复现步骤
     - 记录环境信息
     - 记录输入输出

3. 解决方案制定
   - 最小化修改原则
     - 只修改问题代码
     - 不触碰已验证功能
     - 保持代码结构
   - 修改前备份
     - 创建临时分支
     - 记录修改点
     - 准备回滚方案

4. 验证与反馈
   - 功能验证
     - 测试修改功能
     - 测试相关功能
     - 回归测试
   - 性能验证
     - 检查性能指标
     - 监控内存使用
     - 测试响应时间
```

### 2. 需求变更处理流程
```markdown
1. 需求分析阶段
   - 产品经理视角
     - 分析用户需求
     - 评估业务价值
     - 制定优先级
   - 技术专家视角
     - 评估技术可行性
     - 分析实现成本
     - 识别技术风险

2. 变更评估
   - 影响范围分析
     - 代码影响范围
     - 功能影响范围
     - 性能影响范围
   - 风险评估
     - 技术风险
     - 业务风险
     - 时间风险

3. 方案制定
   - 技术方案
     - 架构设计
     - 技术选型
     - 实现路径
   - 实施计划
     - 开发计划
     - 测试计划
     - 部署计划
```

## 四、开发规范

### 1. Vue3开发规范
```markdown
1. 组件开发
   - 使用组合式API
   - 使用<script setup>语法糖
   - 遵循单一职责原则
   - 组件命名规范

2. 状态管理
   - 使用Pinia
   - 状态分类管理
   - 状态持久化

3. 性能优化
   - 组件懒加载
   - 虚拟滚动
   - 组件缓存
```

### 2. Vite配置规范
```markdown
1. 环境配置
   - 多环境支持
   - 环境变量管理
   - 代理配置

2. 构建优化
   - 依赖预构建
   - 资源处理
   - 代码分割
```

### 3. 数字孪生开发规范
```markdown
1. Three.js集成
   - 场景管理
   - 模型处理
   - 材质系统
   - 动画系统

2. 性能优化
   - 模型优化
   - 渲染优化
   - 内存管理
```

## 五、质量保证

### 1. 代码质量
```markdown
1. 代码规范
   - ESLint配置
   - Prettier配置
   - TypeScript配置

2. 测试要求
   - 单元测试覆盖率≥80%
   - 集成测试覆盖关键流程
   - 性能测试达标
```

### 2. 性能指标
```markdown
1. 加载性能
   - 首屏加载≤2秒
   - FPS≥60
   - 内存占用≤100MB

2. 渲染性能
   - 避免布局抖动
   - 优化重绘重排
   - 合理使用缓存
```

## 六、安全与监控

### 1. 安全规则
```markdown
1. 代码安全
   - 输入验证
   - 异常处理
   - 安全风险防范

2. 数据安全
   - 敏感数据保护
   - 数据规范遵循
   - 隐私保护
```

### 2. 监控体系
```markdown
1. 性能监控
   - 前端监控
     - 性能指标
     - 错误监控
     - 用户行为
   - 数字孪生监控
     - 帧率监控
     - 内存监控
     - 模型加载

2. 优化策略
   - 代码优化
     - 代码分割
     - 资源优化
     - 缓存策略
   - 性能优化
     - 渲染优化
     - 加载优化
     - 内存优化
```

## 七、版本管理

### 1. 版本控制
```markdown
1. 版本号规范
   - 主版本号
   - 次版本号
   - 修订号

2. 更新记录
   - 功能更新
   - 问题修复
   - 性能优化
```

### 2. 发布流程
```markdown
1. 预发布
   - 功能测试
   - 性能测试
   - 兼容性测试

2. 正式发布
   - 版本确认
   - 文档更新
   - 监控部署
```

## 八、问题处理模板

### 1. 问题分析模板
```markdown
1. 问题描述
   - 问题现象
   - 复现步骤
   - 环境信息

2. 原因分析
   - 直接原因
   - 根本原因
   - 影响范围
```

### 2. 解决方案模板
```markdown
1. 解决思路
   - 技术方案
   - 实现步骤
   - 预期效果

2. 验证方案
   - 测试用例
   - 性能指标
   - 验收标准
```

### 3. 实施记录模板
```markdown
1. 修改记录
   - 修改文件
   - 修改内容
   - 修改原因

2. 验证记录
   - 测试结果
   - 性能数据
   - 问题反馈
```

这个整合后的文档更加完整和系统化，包含了：
1. 基础规则和工具使用规范
2. 项目初始化和文档要求
3. 问题处理和需求变更流程
4. 开发规范和质量保证
5. 安全和监控体系
6. 版本管理和发布流程
7. 问题处理模板

每个部分都详细说明了具体的要求和规范，便于团队成员遵循和执行。您觉得这个整合后的文档是否符合您的需求？如果需要进一步调整，我们可以继续讨论。
